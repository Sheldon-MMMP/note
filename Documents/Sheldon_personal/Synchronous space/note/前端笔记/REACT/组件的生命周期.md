# React的生命周期
## 组件的生命周期概述
意义：组件的生命周期有助于理解组件的运行方式、完成更复杂的组件功能、分析组件错误原因等

组件的生命周期：组件从被创建到挂载到页面中运行，再到组件不用时卸载的过程

生命周期的每个阶段总是伴随着一些方法调用，这些方法就是生命周期的==**<font color='red'>钩子函数。</font>**==

钩子函数的作用：为开发人员在不同阶段操作组件提供了时机。

==**<font color='red'>只有类组件才有生命周期。</font>**==

## 生命周期的三个阶段
以下是常用的钩子函数的生命周期缩略图。要看详细的请往下翻阅。


###  1. 创建时（挂载阶段）
执行触发：组件创建时（页面加载时）
执行顺序：

>constructor() --->  render() ---> componentDidMount()

| 钩子函数          | 触发时机                  | 作用                                         |
| ----------------- | ------------------------- | -------------------------------------------- |
| constructor       | 创建组件时，最先执行      | 1.初始化state <br />2.为事件处理程序绑定this |
| render            | 每次组件渲染都会触发      | 渲染UI（注意：不能调用setState()）           |
| componentDidMount | 组件挂载（完成DOM渲染）后 | 1.发送网络请求<br />2.DOM操作                |

### 2.更新时
执行触发：页面更新时，那什么情况会触发页面更新呢？
>有下面三种情况，会导致页面更新：
>- New props：新的props参数
>- setState()：当调用setState()函数(无论有没有修改数据)，[[原理揭秘#setState 的说明|探究setState刷新页面的机制]]
>- forceUpdate()：当调用这个函数

执行顺序：

> render() ---> componentDidUpdate()

| 钩子函数             | 触发时机                  | 作用                                                                          |
| -------------------- | ------------------------- | ----------------------------------------------------------------------------- |
| render               | 每次组件渲染都会触发      | 渲染UI（注意：不能调用setState()）                                            |
| componentDidUpdate() | 组件更新（完成DOM渲染）后 | 1.发送网络请求<br />2.DOM操作<br />注意：如果要setState()必须放在一个if条件中 |

### 3. 卸载时(卸载阶段)
- 执行时机：组件从页面中消失，如父组件删除子组件时，子组件的生命周期就会执行。

| 钩子函数             | 触发时机               | 作用                               |
| -------------------- | ---------------------- | ---------------------------------- |
| componentWillUnmount | 组件卸载(从页面中消失) | 执行清理工作（比如：清理定时器等） |


### 完整的生命周期
上面我们学习的是我们常用的钩子函数，但是真正的生命周期不止这几个函数。


红色的函数是不常用的钩子函数，并且也不推荐大家使用。